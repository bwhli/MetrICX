<div class="header"></div>

<ion-content class="bg-class">
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)" pullMax="50">
        <ion-refresher-content
          pullingIcon="arrow-dropdown"
          pullingText="Pull to refresh"
          refreshingSpinner="circles"
          refreshingText="Refreshing...">
        </ion-refresher-content>
     </ion-refresher>
<ion-grid>
  <ion-row>
    <ion-item-divider>
      <ion-label> Governance Overview</ion-label>
    </ion-item-divider>
    <ion-col size="8">
          <ion-card>
              <ion-card-title  class="card-title-inverted ion-text-start">
                 Latest Block By
              </ion-card-title>
                <ion-card-content class="card-content-inverted">
                      <ion-row>
                        <ion-col size="3" class="ion-text-start">
                          <fa-icon style="padding:2px; color: #1adfcb;" size="2x" [icon]="['fas', 'cubes']"></fa-icon>     
                        </ion-col>
                          <ion-col size="9" class="amount-value-inverted" class="ion-text-end">
                            {{lastBlockCreatedBy}}
                        </ion-col>
                      </ion-row>       
                </ion-card-content>
              </ion-card>
        </ion-col>
        <ion-col size="4">
          <ion-card>
            <ion-card-title  class="card-title-inverted ion-text-start">
                # Preps
            </ion-card-title>
              <ion-card-content class="card-content-inverted">
                  <ion-row>
                    <ion-col size="6" class="ion-text-start">
                      <fa-icon style="padding:1px; color: #1adfcb;" size="2x"  [icon]="['fas', 'users']"></fa-icon>     
                    </ion-col>
                        <ion-col size="6" class="amount-value-inverted ion-text-end" >
                          {{totalNumPreps}}
                      </ion-col>
                    </ion-row>       
              </ion-card-content>
            </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="6">
          <ion-card>
                <ion-card-content class="card-content-inverted">
                    <ion-row>
                        <ion-col class="ion-text-center">
                            <circle-progress
                            [percent]="totalNetworkDelegated" 
                            [radius]="35"
                            [outerStrokeWidth]="2"
                            [innerStrokeWidth]="1"
                            [showInnerStroke]="true"
                            [innerStrokeColor]="'#1d2025'"
                            [outerStrokeColor]="'#1d2025'"
                            [animation]="true"
                            [animationDuration]="300"
                            [showBackground] = "true"
                            [showUnits]="true"
                            [backgroundColor]="'#1adfcb'"
                            [toFixed]="2"
                            [unitsColor]="'#1d2025'"
                            [titleColor]="'#1d2025'"
                            [subtitleColor]="'#1d2025'"
                            [subtitle]="'ICX Voted'"
                            [titleFontSize]="12"
                            [subtitleFontSize]="10">>
                          </circle-progress>
                        </ion-col>
                      </ion-row>    
                      <ion-row *ngIf="isLoaded" >
                        <ion-col size="12" class="ion-text-center"> <small>{{totalICXDelegated}} ICX </small></ion-col>
                      </ion-row>   
                </ion-card-content>
              </ion-card>
        </ion-col>
        <ion-col size="6">
          <ion-card>
            <ion-card-title>
              </ion-card-title>
              <ion-card-content class="card-content-inverted">
                  <ion-row>
                    <ion-col class="ion-text-center">
                      <circle-progress
                      [percent]="totalStakedPerc" 
                      [radius]="35"
                      [outerStrokeWidth]="2"
                      [innerStrokeWidth]="1"
                      [showInnerStroke]="true"
                      [innerStrokeColor]="'#1d2025'"
                      [outerStrokeColor]="'#1d2025'"
                      [animation]="true"
                      [animationDuration]="300"
                      [showBackground] = "true"
                      [showUnits]="true"
                      [backgroundColor]="'#1adfcb'"
                      [toFixed]="2"
                      [unitsColor]="'#1d2025'"
                      [titleColor]="'#1d2025'"
                      [subtitleColor]="'#1d2025'"
                      [subtitle]="'ICX Staked'"
                      [titleFontSize]="12"
                      [subtitleFontSize]="10">>
                    </circle-progress>
                      </ion-col>
                    </ion-row>    
                    <ion-row *ngIf="isLoaded" >
                      <ion-col class="ion-text-center"> <small>{{totalStaked}} ICX </small></ion-col>
                    </ion-row>      
              </ion-card-content>
            </ion-card> 
        </ion-col>
      </ion-row>
  <ion-item-divider>
    <ion-grid>
      <ion-row>
      <ion-col class="ion-text-start align-text-middle">
        <ion-label>My Voted Preps</ion-label>
      </ion-col>
      <ion-col class="ion-text-end">
        <ion-badge class="badge" color="secondary">{{numberOfVotedReps}}</ion-badge>
      </ion-col>
      </ion-row>
    </ion-grid>
 
    </ion-item-divider>
    <ion-row *ngFor="let prep of rows" class="ion-no-padding">
      <ion-col>
        <ion-card>       
          <ion-card-title class="card-title-primary">
           <!--<ion-grid> --> 
            <ion-row>
              <ion-col size="3" class="rank ion-text-start">
                {{prep.name}}          
              </ion-col>
              <ion-col size="6" class="myVotes ion-text-end">
                  <div class="first">My Votes:  {{prep.myVotes}} ({{prep.width | number : '1.2-2' }}%)
                    <div [ngStyle]="{'width.%': prep.width }" class="second"> </div>
                  </div>
              </ion-col>
              <ion-col size="3" class="name ion-text-end">
               Rank {{prep.rank}}
              </ion-col>
            </ion-row>
           <!-- </ion-grid> -->
          </ion-card-title> 
            <ion-card-content class="card-content-primary">
             <!--<ion-grid> --> 
                <ion-row>
                  <ion-col size="3" class="align-text-middle">
                    <div class="circle">
                      <img [src]="prep.imageUrl" alt="img">
                    </div>
                  </ion-col>
                  <ion-col size="3" class="location align-text-middle">
                   {{prep.city}}
                 </ion-col>
                  <ion-col size="3" class="production align-text-middle">
                     Productivity <br/>
                     {{prep.production}}%
                  </ion-col>
                  <ion-col size="3"  class="votes ion-text-end">
                    <circle-progress
                    [percent]="prep.votingPerc" 
                    [radius]="36"
                    [outerStrokeWidth]="2"
                    [innerStrokeWidth]="1"
                    [innerStrokeColor]="'#1adfcb'"
                    [showInnerStroke]="true"
                    [animation]="true"
                    [animationDuration]="300"
                    [showUnits]="true"
                    [toFixed]="2"
                    [unitsColor]="'#ffffff'"
                    [titleColor]="'#ffffff'"
                    [subtitleColor]="'#ffffff'"
                    [subtitle]="prep.totalVotes"
                    [titleFontSize]="12"
                    [subtitleFontSize]="9">>
                  </circle-progress>
                  </ion-col>                
                  </ion-row>  
              <!--  </ion-grid>      -->
            </ion-card-content>
        </ion-card>
        </ion-col>
       </ion-row>
  </ion-grid> 
</ion-content>
